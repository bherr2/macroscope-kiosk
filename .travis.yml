language: node_js
node_js:
- '10'
sudo: required
dist: trusty
addons:
  chrome: stable
  sonarcloud:
    organization: "$SONAR_KEY"
    token:
      secure: "$SONAR_TOKEN"
cache: npm
branches:
  only:
  - develop
  - "/^v\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"
install:
- npm ci
script:
- npm run lint
- npm run build:github
- sonar-scanner -X
deploy:
  provider: pages
  skip-cleanup: true
  github-token: "$GITHUB_TOKEN"
  keep-history: false
  local-dir: dist/macroscope-kiosk
  on:
    branch: develop
notifications:
  slack:
    secure: mA5KtU09xTYvQPyLXnx1stfDLhmYLC/wVJAAzz+yh1kjI3J2YYlWz67IY9IrGDH/FZjTnVMekV6042ZbS5fzv7l6qLX7cjKNVqy3RNPj9yahtdqMoGkKRUOhlWEfkBfrx64UZKwVY0TNYUyTz5mo3fXDP7pzRP0HcM2VwjTHXm733mVdIhb3eLLnz6lGGo7ynR4jIYdx2U8QwDP9nwoZXheUtd5hZxDUSxpd7vRxNcT5y8mBu+7Eo2NqFWiSjzstSY2vJh4yQ6keR7SNJIbnrUMjYdI99dbOvxAhfJnPySd/ibGBw66tCP0GW8NQktqqVgAw6gSFaOIQbqfsI2XPa7hQcEgggN51NYH2AfTEPCb1IlNp/6ndhpXNODfB8HjOK5Qysg9Slkas/niUbAkSLfPvxZ1VcsOTYVIb9kA5ho0PsVRdnliTIKyQvxeT82eBegRVZeXHK6tNZfJmXUradM6/Z3v5DqE2hrf1vP1k6L3+R0SQnvPb+gME3inf0mptmMWclNnfS4ir8UZephbYNrMDjTiifvIembZEGEqDrWnmb5DFDFsOrShm/6QlHir55joSN2oJa+1tF4eXGrCS1uecFpCKYHfRHT+joC8X9HZV1oFxbOGCXWzk+rsiiX8pkgpcDdCkIZmzWL9dOBrNDyIqqZ/zdWkTxGWNcgOYBIU=
